<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FantaTennis</title>

<style>
body{
  font-family:'Segoe UI',sans-serif;
  background:linear-gradient(135deg,#1a472a,#0f2819);
  margin:0;
  padding:10px;
  color:white;
}

h1{text-align:center;margin:10px 0}

table{
  width:100%;
  border-collapse:collapse;
  margin:10px 0;
}

th,td{
  padding:6px;
  text-align:center;
  font-weight:bold;
}

thead th{
  background:#1a472a;
  color:white;
}

tbody td{
  background:#e6f2eb;
  color:black;
}

.montepremi thead th,
.montepremi tbody td{
  background:#1a472a;
  color:white;
}

.players{
  display:flex;
  justify-content:space-around;
  margin-top:10px;
}

.player{
  text-align:center;
}

.player img{
  width:70px;
  border-radius:50%;
}

.score{
  font-weight:bold;
  color:white;
}

.score.win{
  color:#c00000;
}

.stats thead th,
.stats tbody td{
  background:#1a472a;
  color:white;
  font-size:13px;
  padding:4px;
}

.stats td:first-child{
  cursor:pointer;
  text-decoration:underline;
}

button{
  width:100%;
  padding:10px;
  margin-top:5px;
  font-size:16px;
  background:#1a472a;
  color:white;
  border:none;
  border-radius:6px;
}

.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  z-index:1000;
}

.modal-content{
  background:white;
  color:#1a472a;
  margin:10% auto;
  padding:15px;
  width:90%;
  max-width:400px;
  border-radius:10px;
}
</style>
</head>

<body>

<h1>FantaTennis</h1>

<table class="montepremi">
<thead>
<tr><th>Torneo</th><th>ðŸ¥‡</th><th>ðŸ¥ˆ</th><th>ðŸ¥‰</th></tr>
</thead>
<tbody>
<tr><td>ATP 500</td><td>6â‚¬</td><td>4â‚¬</td><td>2â‚¬</td></tr>
<tr><td>ATP 1000</td><td>10â‚¬</td><td>5â‚¬</td><td>3â‚¬</td></tr>
<tr><td>SLAM</td><td>14â‚¬</td><td>8â‚¬</td><td>5â‚¬</td></tr>
<tr><td>FINALS</td><td>20â‚¬</td><td>10â‚¬</td><td>8â‚¬</td></tr>
</tbody>
</table>

<div class="players" id="players"></div>

<table>
<thead>
<tr><th>Giocatore</th><th>Totale</th></tr>
</thead>
<tbody id="totals"></tbody>
</table>

<table class="stats">
<thead>
<tr><th>Giocatore</th><th>ðŸ¥‡</th><th>ðŸ¥ˆ</th><th>ðŸ¥‰</th></tr>
</thead>
<tbody id="statsbody"></tbody>
</table>

<button onclick="addTournament()">Aggiungi torneo</button>

<!-- MODAL PALMARES -->
<div id="palmaresModal" class="modal">
  <div class="modal-content">
    <h3 id="palmaresTitle"></h3>
    <div id="palmaresBody"></div><br>
    <button onclick="closePalmares()">Chiudi</button>
  </div>
</div>

<script>
const players=[
 {name:'Gennaro',img:'img/gennaro.jpg'},
 {name:'Mirko',img:'img/mirko.jpg'},
 {name:'Luca',img:'img/luca.jpg'}
];

let tournaments=[];

function renderPlayers(){
 const div=document.getElementById('players');
 div.innerHTML='';
 players.forEach(p=>{
   div.innerHTML+=`
   <div class="player">
     <img src="${p.img}">
     <div>${p.name}</div>
     <div class="score">0</div>
   </div>`;
 });
}

function renderStats(){
 const body=document.getElementById('statsbody');
 body.innerHTML='';
 players.forEach((p,i)=>{
   let w=0,s=0,t=0;
   tournaments.forEach(tr=>{
     const sc=tr.scores;
     const sorted=[...sc].sort((a,b)=>b-a);
     if(sc[i]===sorted[0]&&sc[i]>0)w++;
     else if(sc[i]===sorted[1]&&sc[i]>0)s++;
     else if(sc[i]===sorted[2]&&sc[i]>0)t++;
   });
   body.innerHTML+=`
   <tr onclick="openPalmares(${i})">
     <td>${p.name}</td><td>${w}</td><td>${s}</td><td>${t}</td>
   </tr>`;
 });
}

function openPalmares(i){
 let f=[],s=[],t=[];
 tournaments.forEach(tr=>{
   const sc=tr.scores;
   const so=[...sc].sort((a,b)=>b-a);
   if(sc[i]===so[0]&&sc[i]>0)f.push(tr.name);
   else if(sc[i]===so[1]&&sc[i]>0)s.push(tr.name);
   else if(sc[i]===so[2]&&sc[i]>0)t.push(tr.name);
 });
 document.getElementById('palmaresTitle').innerText=players[i].name;
 document.getElementById('palmaresBody').innerHTML=
 `ðŸ¥‡ ${f.join(', ')||'â€”'}<br>ðŸ¥ˆ ${s.join(', ')||'â€”'}<br>ðŸ¥‰ ${t.join(', ')||'â€”'}`;
 document.getElementById('palmaresModal').style.display='block';
}

function closePalmares(){
 document.getElementById('palmaresModal').style.display='none';
}

renderPlayers();
renderStats();
</script>

</body>
</html>
